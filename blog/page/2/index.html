
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Philippe Bourgau's blog</title>
  <meta name="author" content="Philippe Bourgau">

  
  <meta name="description" content="A programming blog. Particularly about agile development, real world walkthrough, tutorials, side project entrepreneurship and open source software.">

  
  <meta name="keywords" content="blog, programming, ruby, coffeescript, c#, java, agile, extreme programming, xp, kanban, scrum, tdd, testing, unit testing">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://philippe.bourgau.net/blog/page/2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/PhilippeBourgau" rel="alternate" title="Philippe Bourgau's blog" type="application/atom+xml">
  <link href="/stylesheets/asides.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/banner.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/tables.css" media="screen, projection" rel="stylesheet" type="text/css" />
<link href="/stylesheets/images.css" rel="stylesheet" type="text/css">

<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=Raleway:100" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Lora:400,400italic,700,700italic|Istok+Web:400,400italic,700,700italic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Shadows+Into+Light" rel="stylesheet" type="text/css" />

<meta name="google-translate-customization" content="799b363844424d98-0fe595ed0d0bb43c-g68c635d8080c4daa-14"></meta>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-30589315-1', 'auto', {'allowLinker': true});
  ga('send', 'pageview');
  ga('require', 'linker');
  ga('linker:autoLink', ['agileavatars.com']);
</script>

<!-- tables css -->

  

</head>

<body>
  <div id="header-container">
    <div id="header">
      <div class="wrapper">
        <header role="banner"><hgroup>
  <h1><a href="/">Philippe Bourgau's blog</a></h1>
</hgroup>

</header>
        <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="http://feeds.feedburner.com/PhilippeBourgau" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="https://feedburner.google.com/fb/a/mailverify?uri=PhilippeBourgau&amp;loc=en_US" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:philippe.bourgau.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
      </div>
    </div>
  </div>
  <div id="body"   >
    <div id="main">
      <div id="content">
	<div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/how-to-mock-your-browsers-timezone-with-jasmine-and-momentjs/">How to Mock Your Browser&#8217;s Timezone With Jasmine and MomentJS</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-03-30T06:29:00+00:00" pubdate data-updated="true">Mar 30<span>th</span>, 2017</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last week, I&rsquo;ve been working at adding a distributed countdown to my <a href="https://github.com/philou/planning-poker">Online Planning Poker App</a>. As our team works from Paris and Beirut, I wanted to unit test that it would work well through different timezones. I found a surprisingly simple solution.</p>

<h2>What Google told me</h2>

<p>I first searched Google to see how to do it. I found 2 answers that looked promising :</p>

<ul>
<li><a href="https://balanceiskey.github.io/2016/01/27/mocking-timezones.html">You can use moment-timezone to mock timezones in Jasmine</a> which I unfortunately did not manage to use</li>
<li><a href="http://stackoverflow.com/questions/12220717/how-to-mock-the-browsers-timezone">How to mock the browser&rsquo;s timezone?</a> which seemed a bit of hack</li>
</ul>


<p>Known results for such a simple situation were disappointing !</p>

<h2>What I ended up with</h2>

<p>After a good deal of dabbling around, I eventually found a pretty simple solution using <a href="https://jasmine.github.io/">Jasmine</a> and <a href="https://momentjs.com/timezone/">Moment Timezone</a> :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">jasmine</span><span class="p">.</span><span class="nx">clock</span><span class="p">().</span><span class="nx">install</span><span class="p">();</span>
</span><span class='line'><span class="p">...</span>
</span><span class='line'><span class="nx">jasmine</span><span class="p">.</span><span class="nx">clock</span><span class="p">().</span><span class="nx">mockDate</span><span class="p">(</span><span class="nx">moment</span><span class="p">.</span><span class="nx">tz</span><span class="p">(</span><span class="s2">&quot;2017-03-23 10:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;Europe/Paris&quot;</span><span class="p">).</span><span class="nx">toDate</span><span class="p">())</span>
</span></code></pre></td></tr></table></div></figure>


<p>Obviously, the drawback is that it implies setting both the timezone <em>and the time</em>. This should be ok in most of unit tests though, but might be an issue in some cases.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/almost-15-years-of-using-design-by-contract/">Almost 15 Years of Using Design by Contract</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-03-14T18:57:00+00:00" pubdate data-updated="true">Mar 14<span>th</span>, 2017</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I first read about Design By Contract in 2002, in <a href="https://www.amazon.com/Object-Oriented-Software-Construction-Book-CD-ROM/dp/0136291554/ref=sr_1_2?tag=pbourgau-20&amp;amp;ie=UTF8&amp;qid=1490073815&amp;sr=8-2&amp;keywords=object+oriented+software+construction+meyer">Object Oriented Software Construction 2</a>. As soon as I read it, I was convinced, today, I still believe it&rsquo;s a great and fundamental technique. That&rsquo;s why, I almost never write a contract ! Let me explain.</p>

<h2>Phase 1 : DbC ignorance</h2>

<p>I started to code professionally in 2001. This was a time where design and quality software meant <a href="https://en.wikipedia.org/wiki/IBM_Rational_Rose_XDE">Rational Rose</a> (a UML design and code generation tool) while I, at the contrary, was just <a href="https://en.wikipedia.org/wiki/Cowboy_coding">Cow Boy Coding</a> my way out of any problem I was given.</p>

<p>I wasn&rsquo;t really doing Object Oriented programming, but rather imperative programming, using objects as structs, getters, setters, and classes as a way to organize the code &hellip; In this context, my design skills were improving slowly, and I was at the risk of falling in love with a local-optimum practice that would prevent me from growing further.</p>

<p>That&rsquo;s why I started to read books such as the <a href="https://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612/ref=sr_1_1?tag=pbourgau-20&amp;amp;s=books&amp;ie=UTF8&amp;qid=1490074343&amp;sr=1-1&amp;keywords=design+patterns">Gang Of Four Design Patterns</a>, or <a href="https://www.amazon.com/Object-Oriented-Software-Construction-Book-CD-ROM/dp/0136291554/ref=sr_1_2?tag=pbourgau-20&amp;amp;ie=UTF8&amp;qid=1490073815&amp;sr=8-2&amp;keywords=object+oriented+software+construction+meyer">OOSC2</a>.</p>

<h2>Phase 2 : DbC enlightenment</h2>

<p><a href="https://www.amazon.com/Object-Oriented-Software-Construction-Book-CD-ROM/dp/0136291554/ref=sr_1_2?tag=pbourgau-20&amp;amp;ie=UTF8&amp;qid=1490073815&amp;sr=8-2&amp;keywords=object+oriented+software+construction+meyer"><img src="../imgs/2017-03-14-almost-15-years-of-using-design-by-contract/OOSC2.jpg" alt="The cover of the Object Oriented Software Construction 2" /></a></p>

<p>Reading this book was a profound experience to me. My programming changed fundamentally before and after reading it. The chapter about contracts, taught me what objects are.</p>

<p>One the one hand, Pre and Post conditions can be used in any kind of programming and are just a kind of C <code>assert</code> macro on steroids. Class invariant, on the other hand, is a completely different kind of beast. The invariant of a class is a predicate about an instance of this class that should always be true. For example : field X should never be null, or the value of field N should always be greater than 0.</p>

<p>In some way, grasping the concept of invariant is close to understanding what a class is.</p>

<h2>Phase 3 : DbC everywhere</h2>

<p>That&rsquo;s when I started to write contracts everywhere. I was writing C++ code at the time, and my code must have looked something like that :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
</pre></td><td class='code'><pre><code class='c++'><span class='line'><span class="k">class</span> <span class="nc">MonkeyWrench</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">bool</span> <span class="n">_isStarted</span><span class="p">;</span>
</span><span class='line'>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Part</span><span class="o">&gt;*</span> <span class="n">_movingParts</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">protected</span><span class="o">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">invariant</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">assert</span><span class="p">(</span><span class="n">_isStarted</span> <span class="o">==</span> <span class="p">(</span><span class="n">_movingParts</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">));</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">public</span><span class="o">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">MonkeyWrench</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">-&gt;</span><span class="n">_isStarted</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>        <span class="k">this</span><span class="o">-&gt;</span><span class="n">_movingParts</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">invariant</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">bool</span> <span class="n">isStarted</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">isStarted</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">void</span> <span class="n">start</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">assert</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">isStarted</span><span class="p">());</span>
</span><span class='line'>        <span class="n">invariant</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">this</span><span class="o">-&gt;</span><span class="n">_movingParts</span> <span class="o">=</span> <span class="p">...</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">invariant</span><span class="p">();</span>
</span><span class='line'>        <span class="n">assert</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">isStarted</span><span class="p">());</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Part</span><span class="o">&gt;&amp;</span> <span class="n">movingParts</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">assert</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">isStarted</span><span class="p">());</span>
</span><span class='line'>        <span class="n">invariant</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">_movingParts</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>I definitely over-abused contracts, it made the code unreadable. Plus sometimes, I was using excessively long and intricate assertions which made the problem even worse.</p>

<p>Hopefully, overusing contracts also taught me a lot in a short time. Here are some of the lessons I learned :</p>

<ul>
<li>DbC is not very well supported, it&rsquo;s never something built in the language, and edge cases like inheriting an invariant or conditions can become messy pretty fast.</li>
<li>Checking for intricate contracts at every method call can be pretty slow.</li>
<li>Checking everything beforehand is not always the simplest thing to do, at times, throwing an exception on failure just does a better job.</li>
<li>It happened that removing the contract made the code do just what I wanted. It&rsquo;s easy to write unnecessary strict contracts.</li>
<li><a href="https://en.wikipedia.org/wiki/Command%E2%80%93query_separation">Command Query Separation Principle</a> is great ! Having &lsquo;const&rsquo; or &lsquo;pure&rsquo; queries that don&rsquo;t change anything make writing contracts a lot simpler.</li>
<li>Preconditions on queries are painful. When possible, returning a sensible &lsquo;null value&rsquo; works better, nothing is worse than getting an error when trying to call a const query from the interactive debugger.</li>
<li>Finally, the more immutable a class is, the simpler the invariant. With a lot of mutable fields, you might resort to have the invariant check that fields are synchronized as expected. If fields are immutable, this simply vanishes.</li>
</ul>


<h2>Phase 4 : DbC hangover</h2>

<p>At the same time I discovered all these small subtleties about contracts, I fell upon Martin Fowler&rsquo;s book <a href="https://www.amazon.com/Refactoring-Improving-Design-Existing-Code/dp/0201485672/ref=sr_1_1?tag=pbourgau-20&amp;amp;s=books&amp;ie=UTF8&amp;qid=1490074424&amp;sr=1-1&amp;keywords=refactoring+improving+the+design+of+existing+code">Refactoring, improving the design of existing code</a> and started to use Unit Tests extensively. This lead me to the following conclusions :</p>

<ul>
<li>Tests are more efficient at producing quality software</li>
<li>Contracts can be an hindrance when trying to do baby steps refactorings as described in Martin Fowler&rsquo;s book</li>
</ul>


<p>On top of that, as DbC is not natively supported by languages, no documentation is generated, meaning that most of the time, the callers still have to look into the code. As a result, I was using contracts less and less often.</p>

<h2>Phase 5 : DbC Zen</h2>

<p>Looking back, I might not be writing a lot of <code>asserts</code> in my code, but I am still thinking in terms of contracts all the time. In fact, there are a ton of ways to use DbC without writing assertions :</p>

<ul>
<li>Use as much immutability as possible. An immutable class does not need to check its invariant all the time, just throwing from the constructor if arguments are not valid is enough.</li>
<li>Use conventions as much as possible, for example, constructor arguments should be set for all the life of the object (cf <a href="https://www.amazon.com/Growing-Object-Oriented-Software-Guided-Tests/dp/0321503627/ref=sr_1_1?tag=pbourgau-20&amp;amp;s=books&amp;ie=UTF8&amp;qid=1490074450&amp;sr=1-1&amp;keywords=growing+object+oriented+software+guided+by+tests">Growing Object Oriented Software Guided by Tests</a> which describes the different ways to inject something in an object)</li>
<li>Looking back at my DbC assertions, most relate to null values. Again conventions work better ! At work, we simply forbid passing null values around. If something can be null, it means it&rsquo;s optional, Java has an <code>Optional&lt;T&gt;</code> class for just that (I&rsquo;m pretty sure it is possible to do something even better with C++ templates). In this case, if the contract is broken, NullReferenceException will eventually be our assertion.</li>
<li>Replace as many pre &amp; post conditions with invariants on the callee, the arguments or the return objects as possible. It makes sense as it&rsquo;s just making sure we are using &lsquo;valid&rsquo; objects everywhere. Again, if these objects are immutable, it makes the whole thing even simpler !</li>
<li>To take further benefit of the invariant of immutable objects, introduce new types. For example, instead of changing an object&rsquo;s state through a command with associated involved contracts, split the class in 2 and make the method a query returning an immutable object, potentially making the initial class immutable as well. Remember, immutable classes mean almost no assertions !</li>
<li>Use your language. Ex, instead of asserting that 2 lists remain of the same length, refactor to a list of pairs ! (I know that&rsquo;s an obvious example, but you get the point)</li>
<li>If you are using a statically typed language, use types ! For example, I remember at one project I worked on, we had an bug involving a duration : somewhere in the code milliseconds got mistaken for seconds &hellip; We fixed that by replacing the <code>integer</code> by <code>TimeSpan</code> all over the place. Again, that&rsquo;s so obvious !</li>
<li>Eventually, when all else fails, or when it&rsquo;s just too much overhead, use the simple asserts provided by your language or common libraries.</li>
</ul>


<p>To come back at the previous code section, this how it could be written without assertions :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='c++'><span class='line'><span class="k">class</span> <span class="nc">MovingMonkeyWrench</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Part</span><span class="o">&gt;</span> <span class="n">_parts</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">public</span><span class="o">:</span>
</span><span class='line'>    <span class="n">MovingMonkeyWrench</span><span class="p">()</span> <span class="o">:</span> <span class="n">_parts</span><span class="p">(...)</span> <span class="p">{}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Part</span><span class="o">&gt;&amp;</span> <span class="n">parts</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">_parts</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">MonkeyWrench</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="k">public</span><span class="o">:</span>
</span><span class='line'>    <span class="n">MovingMonkeyWrench</span> <span class="n">start</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">MovingMonkeyWrench</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>Details are omitted, but it&rsquo;s easy to see how shorter the code is.</p>

<h2>Conclusion</h2>

<p>When applying all the techniques above, you&rsquo;ll see that cases for explicit assertions are rare. Less assertions also workarounds the issues coming from the poor support for DbC : no documentation and intricate cases.</p>

<p>In the end, assertions made my code more &lsquo;functional&rsquo;. I&rsquo;m not alone to have done the same journey, and if you are interested you should read Eric Evans&#8217; <a href="https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215/ref=sr_1_1?tag=pbourgau-20&amp;amp;s=books&amp;ie=UTF8&amp;qid=1490082811&amp;sr=1-1&amp;keywords=domain+driven+design">DDD</a> book where he presents things like immutable value objects and specification objects.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/my-ultimate-jira-personal-kanban/">My Ultimate Jira Personal Kanban</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-03-03T06:46:00+00:00" pubdate data-updated="true">Mar 3<span>rd</span>, 2017</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A few years ago, I <a href="/bye-bye-programmers-todo-list-hello-personnal-kanban-on-jira/">wrote</a> about how I started to use <a href="https://www.atlassian.com/software/jira">Jira</a> as my <a href="http://www.personalkanban.com/pk/">personal Kanban</a> board <a href="https://twitter.com/work_at_murex">at work</a>. A lot of things have changed since then, which brought me to update my board and make it even more productive !</p>

<h2>The context</h2>

<p>During the almost 18 months since I wrote this first post, a lot of things have changed in my daily work (hopefully : I&rsquo;m not doing the same thing again and again !). Essentially, I got involved in more projects, some of which involve people from all around the company and some of which don&rsquo;t require any code to be written. For example, I&rsquo;m now engaged in our Agile Community of Practice, where I sometimes contribute content.</p>

<p>Here are the consequences on my work :</p>

<ul>
<li>I have more tasks to deal with, not necessarily more work, but still more tasks</li>
<li>I have more sources of tasks : tasks can come from any of the projects I am involved in</li>
<li>I have more tasks depending on other people, and that are in a <code>WAITING</code> state meanwhile</li>
</ul>


<p>I had to adapt my personal Kanban to this new workload.</p>

<h2>The changes</h2>

<p>As I explained in <a href="/bye-bye-programmers-todo-list-hello-personnal-kanban-on-jira/">the previous description of my Jira Personal Kanban</a>, I am using a custom project and Kanban board to aggregate all my tasks from various projects, in order to see everything in a single unique place. Here are the changes I&rsquo;ve made since, so if you haven&rsquo;t yet, it might be a good idea to read <a href="/bye-bye-programmers-todo-list-hello-personnal-kanban-on-jira/">that previous version</a> first.</p>

<h3>Quick filters</h3>

<p>In his post <a href="http://paulgraham.com/makersschedule.html">Maker&rsquo;s Schedule, Manager&rsquo;s Schedule</a> Paul Graham explained the challenge of having a lot of non-programming work to do everyday for programmers. He then advises to use slots for different activities during the day, in order to keep uninterrupted chunks of time to do creative work. To apply this technique, I reserved &lsquo;Unbookable except for X&rsquo; slots in my calendar everyday.</p>

<p>I had previously been using Swim-lanes to track work from different projects. This turned out not to scale very well to more projects : it made the board messy, and I kept being distracted by all these other tasks. I ditched all the Swim-lanes (not exactly, I kept one for urgent issues only). Instead of Swim-lanes for tracking projects, I now use Quick Filters. I created such filters as <code>With Project X</code> and <code>Without Project X</code>. During the day, when I want to focus on Project X, I use quick filters to only show tasks related to it.</p>

<p><img src="../imgs/2017-03-03-my-ultimate-jira-personal-kanban/quick-filters.jpg" alt="Quick filters screen capture" /></p>

<h3>Day markers</h3>

<p>I have a daily routine of checking what&rsquo;s on my plate and deciding what I&rsquo;d like to achieve during the day (picking the right time to do this is an art in itself). In order to keep track of this, I use special day marker tasks : as <code>^^^ TODAY ^^^</code>, <code>^^^ TOMORROW ^^^</code> and <code>^^^ THIS WEEK ^^^</code>. This tasks are always in my <code>TODO</code> column, and will never be completed. I move them around to mark what I expect to finish at different time horizon. Ex : everything above <code>^^^ TODAY ^^^</code> should be finished before the end of the day.</p>

<p>Again, this helps me to focus on today&rsquo;s activities, and to do just enough prioritization.</p>

<p><img src="../imgs/2017-03-03-my-ultimate-jira-personal-kanban/day-markers.jpg" alt="Day marker tasks screen capture" /></p>

<p>One last thing here, you&rsquo;ll have noticed the Epic for these special tasks. It&rsquo;s a way to identify them in JQL queries.</p>

<h3>WAITING flag</h3>

<p>Quite often, you have tasks waiting for someone else. That&rsquo;s surely not the most efficient situation, but once you leave the comfort of your focused dev team, handoffs are often the norm (at least until the lean principles spread in every part of the business). Status of waiting tasks is worth checking regularly, but very certainly not many times per day !</p>

<p>Again, leaving them in my board created useless distraction. I have now taken the habit of renaming the tasks I&rsquo;m waiting for with a <code>[WAITING] ...</code> prefix. On top of that, I created 2 quick filters <code>WAITING</code> and <code>Without WAITING</code> to quickly check and then forget about waiting tasks.</p>

<p><img src="../imgs/2017-03-03-my-ultimate-jira-personal-kanban/waiting-tasks.jpg" alt="Waiting tasks screen capture" /></p>

<h3>Watching tasks I&rsquo;m not the assignee of</h3>

<p>On some occasions, we might be two of us working on the same task, or I might want to keep an eye on a task to know if something is needed from me. As there is only a single possible assignee in Jira, I changed my global filters to also include tasks with a custom label <code>pbourgau-watch</code>. Any time I want to add a task in my board, I just add this label to it.</p>

<p><img src="../imgs/2017-03-03-my-ultimate-jira-personal-kanban/pbourgau-watch.jpg" alt="Screen capture of a task description I'm not the assignee of" /></p>

<h3>Getting the Lean reports back</h3>

<p>In order not to have too many old tasks in my board, I used to filter out old items in the global filter. This did the job, but at the cost of invalidating the lean reports (cumulative flow and control charts). In order to get these back, I removed this constraint from the global filter, and created yet another quick filter <code>Without Old</code> which I almost always keep on.</p>

<p><img src="../imgs/2017-03-03-my-ultimate-jira-personal-kanban/control-chart.jpg" alt="Control chart screen capture" /></p>

<h2>Scripts</h2>

<h4>Global Filter</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="n">project</span> <span class="k">in</span> <span class="p">(</span><span class="n">POP</span><span class="p">,</span> <span class="n">POPABTODO</span><span class="p">,</span> <span class="ss">&quot;Development Engineering Program&quot;</span><span class="p">,</span> <span class="n">COPA</span><span class="p">)</span>
</span><span class='line'><span class="k">AND</span> <span class="k">type</span> <span class="o">!=</span> <span class="n">Epic</span>
</span><span class='line'><span class="k">AND</span> <span class="p">(</span><span class="n">Assignee</span> <span class="o">=</span> <span class="n">pbourgau</span> <span class="k">OR</span>
</span><span class='line'>    <span class="n">Co</span><span class="o">-</span><span class="n">Assignees</span> <span class="k">in</span> <span class="p">(</span><span class="n">pbourgau</span><span class="p">)</span> <span class="k">OR</span>
</span><span class='line'>    <span class="n">mentors</span> <span class="k">in</span> <span class="p">(</span><span class="n">pbourgau</span><span class="p">)</span> <span class="k">OR</span>
</span><span class='line'>    <span class="n">labels</span> <span class="k">in</span> <span class="p">(</span><span class="n">pbourgau</span><span class="o">-</span><span class="n">watch</span><span class="p">))</span>
</span><span class='line'><span class="k">ORDER</span> <span class="k">BY</span> <span class="n">Rank</span> <span class="k">ASC</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Quick Filters</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="c1">-- With &quot;Project X&quot; + Day marker tasks (Epic link ...) + tasks containing &quot;BRANDING&quot;</span>
</span><span class='line'><span class="n">project</span> <span class="o">=</span> <span class="ss">&quot;Project X&quot;</span> <span class="k">or</span> <span class="ss">&quot;Epic Link&quot;</span> <span class="o">=</span> <span class="n">POPABTODO</span><span class="o">-</span><span class="mi">410</span> <span class="k">or</span> <span class="n">summary</span> <span class="o">~</span> <span class="ss">&quot;BRANDING&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">-- Without &quot;Project X&quot;</span>
</span><span class='line'><span class="n">project</span> <span class="o">!=</span> <span class="ss">&quot;Project X&quot;</span> <span class="k">and</span> <span class="n">summary</span>  <span class="o">!~</span> <span class="ss">&quot;BRANDING&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">-- Without Old</span>
</span><span class='line'><span class="n">status</span> <span class="k">not</span> <span class="k">in</span> <span class="p">(</span><span class="n">DONE</span><span class="p">,</span><span class="n">CLOSED</span><span class="p">)</span> <span class="k">OR</span> <span class="n">updated</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">14</span><span class="n">d</span>
</span><span class='line'>
</span><span class='line'><span class="c1">-- WAITING</span>
</span><span class='line'><span class="n">summary</span> <span class="o">~</span> <span class="s1">&#39;WAITING&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">-- Without WAITING</span>
</span><span class='line'><span class="n">summary</span> <span class="o">!~</span> <span class="s1">&#39;WAITING&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Things that did not change</h4>

<p>I still use a WIP limit on the In Progress column, display the Epic in on the cards and special use custom color coding for tasks :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="c1">-- Tasks with an imminent due date become red</span>
</span><span class='line'><span class="n">duedate</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="n">d</span> <span class="k">or</span> <span class="n">priority</span> <span class="o">=</span> <span class="ss">&quot;1-Very High&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">-- Tasks with a due date are orange</span>
</span><span class='line'><span class="n">duedate</span> <span class="k">is</span> <span class="k">not</span> <span class="n">EMPTY</span>
</span></code></pre></td></tr></table></div></figure>


<h2>The result</h2>

<p>Overall, this is how my board looks like :</p>

<p><a href="../imgs/2017-03-03-my-ultimate-jira-personal-kanban/full-board.jpg"><img src="../imgs/2017-03-03-my-ultimate-jira-personal-kanban/full-board-small.jpg" alt="Full board screen capture" /></a></p>

<p>I guess I&rsquo;m a kind of personal productivity geek &hellip; but I believe it&rsquo;s a skill of utter importance for developers, especially when they get a bit of experience and are not fed ready made tasks to do.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/how-to-subscribe-to-an-actioncable-channel-on-a-specific-page-with-custom-data/">How to Subscribe to an ActionCable Channel on a Specific Page With Custom Data ?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-02-23T05:25:00+00:00" pubdate data-updated="true">Feb 23<span>rd</span>, 2017</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In my spare time, I&rsquo;m writing a <a href="https://github.com/philou/planning-poker">Planning Poker App</a>. As a reminder, planning poker is a group estimation technique designed to eliminate influence bias. Participants keeps their estimates secret until everyone unveils them at the same time (See <a href="https://en.wikipedia.org/wiki/Planning_poker">Wikipedia</a> for more details).</p>

<p>The driving idea behind my app is for team members to connect together and share a view of the current vote happening in their team. Each team has an animator, who is responsible to start new votes. This is the aspect I&rsquo;ve been working on during the last few days. I want all team members to be notified that a new vote started by displaying a countdown on their page.</p>

<p>I am building the app with <a href="http://rubyonrails.org/">Rails 5</a> but I did not have a clear idea of what technology to use to build this feature. After some googling, I found that ActionCable provides just the kind of broadcasting I am looking for (Have a look at the <a href="http://edgeguides.rubyonrails.org/action_cable_overview.html">ActionCable Rails guide</a> for more details).</p>

<h2>A Specific Page</h2>

<p>The Rails guide is pretty clear, as usual I would say, but all the examples show subscriptions at any page load. As explained above, I only want participants to subscribe to their own team&rsquo;s votes : until they have joined a team, it is not possible to subscribe to a particular channel.</p>

<p>As my app is currently behaving, once identified, participants get to a specific team page. I wanted to use this page as the starting point to my subscription. After some more googling about page specific JavaScript in Rails, I found <a href="http://brandonhilkert.com/blog/organizing-javascript-in-rails-application-with-turbolinks/">this page</a> from Brandon Hilkert that explains how to do this cleanly. The idea is to add the controller and action names to the body tag, and to filter out js code at page load. This is what I ended up doing :</p>

<p>First, I adapted the app layout to keep track of the controller and action names in the HTML body :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- app/layouts/application.html.erb --&gt;</span>
</span><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'>  ...
</span><span class='line'>  <span class="nt">&lt;body</span> <span class="na">class=</span><span class="s">&quot;&lt;%= controller_name %&gt; &lt;%= action_name %&gt;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    ...
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then I replaced the default channel subscription with a function :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="c1"># app/assets/javascripts/channels/team.coffee</span>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">Channels</span> <span class="o">||=</span> <span class="p">{}</span>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">Channels</span><span class="p">.</span><span class="nx">Team</span> <span class="o">||=</span> <span class="p">{}</span>
</span><span class='line'>
</span><span class='line'><span class="nv">App.Channels.Team.subscribe = </span><span class="nf">-&gt;</span>
</span><span class='line'>  <span class="nx">App</span><span class="p">.</span><span class="nx">cable</span><span class="p">.</span><span class="nx">subscriptions</span><span class="p">.</span><span class="nx">create</span> <span class="s">&quot;TeamChannel&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nv">received: </span><span class="nf">(data) -&gt;</span>
</span><span class='line'>      <span class="c1"># Do something with this data</span>
</span></code></pre></td></tr></table></div></figure>


<p>As a reminder, here is what the server side channel would look like :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">TeamChannel</span> <span class="o">&lt;</span> <span class="ss">ApplicationCable</span><span class="p">:</span><span class="ss">:Channel</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">subscribed</span>
</span><span class='line'>    <span class="n">stream_from</span> <span class="s2">&quot;team_channel&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Finally, I called this subscribe function from some page specific Javascript :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="c1"># app/assets/team_members.coffee</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span> <span class="s">&quot;turbolinks:load&quot;</span><span class="p">,</span> <span class="nf">-&gt;</span>
</span><span class='line'>  <span class="k">return</span> <span class="k">unless</span> <span class="nx">$</span><span class="p">(</span><span class="s">&quot;.team_members.show&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">App</span><span class="p">.</span><span class="nx">Channels</span><span class="p">.</span><span class="nx">Team</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s it. By playing around in your browser&rsquo;s js console, you should be able to test it.</p>

<h2>Custom Data</h2>

<p>That&rsquo;s just half of the story. The code above subscribes on a specific page, but it does not specify any particular team channel to subscribe to. This means that all participants would receive notifications from all teams !</p>

<p>In his article about unobtrusive JavaScript in Rails, Brandon Hilkert also suggests using HTML data attributes to pass parameters to the a JavaScript button event handler. There&rsquo;s no button in our case, but we can still use the same technique. Let&rsquo;s add data specific attributes to the HTML body.</p>

<p>To subscribe to specific team channel, the plan is to add the team name to the HTML body tag through a data attribute, then to capture and use this team name when subscribing.</p>

<p>Again, let&rsquo;s enhance the layout :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- app/layouts/application.html.erb --&gt;</span>
</span><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'>  ...
</span><span class='line'>  <span class="nt">&lt;body</span> <span class="na">class=</span><span class="s">&quot;&lt;%= controller_name %&gt; &lt;%= action_name %&gt;&quot;</span> <span class="err">&lt;%=</span> <span class="na">yield</span> <span class="na">:extra_body_attributes</span> <span class="err">%</span><span class="nt">&gt;</span> &gt;
</span><span class='line'>    ...
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>I had to adapt my views. In the team members show view (the one doing the subscription), I added an extra data attribute for the team name :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- app/views/team_members/show.html.erb --&gt;</span>
</span><span class='line'><span class="err">&lt;</span>% provide(:extra_body_attributes, raw(&quot;data-team-name=\&quot;#{@team.name}\&quot;&quot;)) %&gt;
</span><span class='line'>
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>With this done, it is possible to capture the team name from the page load event and feed it to the subscribe method :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="c1"># app/assets/team_members.coffee</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span> <span class="s">&quot;turbolinks:load&quot;</span><span class="p">,</span> <span class="nf">-&gt;</span>
</span><span class='line'>  <span class="k">return</span> <span class="k">unless</span> <span class="nx">$</span><span class="p">(</span><span class="s">&quot;.team_members.show&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">App</span><span class="p">.</span><span class="nx">Channels</span><span class="p">.</span><span class="nx">Team</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s">&#39;body&#39;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s">&#39;team-name&#39;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>I then used the team name to subscribe to a specific channel :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="c1"># app/assets/javascripts/channels/team.coffee</span>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">Channels</span> <span class="o">||=</span> <span class="p">{}</span>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">Channels</span><span class="p">.</span><span class="nx">Team</span> <span class="o">||=</span> <span class="p">{}</span>
</span><span class='line'>
</span><span class='line'><span class="nv">App.Channels.Team.subscribe = </span><span class="nf">(teamName) -&gt;</span>
</span><span class='line'>  <span class="nx">App</span><span class="p">.</span><span class="nx">cable</span><span class="p">.</span><span class="nx">subscriptions</span><span class="p">.</span><span class="nx">create</span> <span class="p">{</span><span class="nv">channel: </span><span class="s">&quot;TeamChannel&quot;</span><span class="p">,</span> <span class="nv">team_name: </span><span class="nx">teamName</span><span class="p">},</span>
</span><span class='line'>    <span class="nv">received: </span><span class="nf">(data) -&gt;</span>
</span><span class='line'>      <span class="c1"># Do something with this data</span>
</span></code></pre></td></tr></table></div></figure>


<p>The last piece is to actually start a specific channel :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">TeamChannel</span> <span class="o">&lt;</span> <span class="ss">ApplicationCable</span><span class="p">:</span><span class="ss">:Channel</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">subscribed</span>
</span><span class='line'>    <span class="n">stream_from</span> <span class="s2">&quot;team_channel_</span><span class="si">#{</span><span class="n">params</span><span class="o">[</span><span class="ss">:team_name</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Same as before, hack a bit with your browser&rsquo;s console, you should be able to check that it&rsquo;s working.</p>

<h2>Last thoughts</h2>

<p>This is not exhaustive, depending on your situation, there might be other things you&rsquo;ll need to do, like unsubscriptions for example.</p>

<p>I&rsquo;d also like to give a word of feedback about ActionCable after this first look at it. Overall, it worked great both in development and production. Everything seemed to work almost out of the box &hellip; Except testing : I did not manage to write robust unit tests around it. There is <a href="https://github.com/rails/rails/pull/23211">pull request</a> for that that should be merged in Rails 5.~ sometimes soon. For the moment, I&rsquo;m sticking to large scale cucumber tests.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/how-i-finally-use-docker-on-small-open-source-side-projects/">How I Finally Use Docker on Small Open Source Side Projects</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-02-16T19:37:00+00:00" pubdate data-updated="true">Feb 16<span>th</span>, 2017</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A few months ago, I started <a href="https://github.com/philou/planning-poker">Philou&rsquo;s Planning Poker</a>, an open source side project to run <a href="https://en.wikipedia.org/wiki/Planning_poker">planning poker estimate sessions</a> remotely. The main technology is <a href="http://rubyonrails.org/">Rails</a>, and I&rsquo;d been planning to use <a href="https://www.docker.com/">Docker</a> as much as possible as a way to learn it. Indeed, I learned that Docker is no Silver Bullet !</p>

<p><img class="center" src="/imgs/2017-02-16-how-i-finally-use-docker-on-small-open-source-side-projects/docker-silver-bullet.jpg" title="The Docker logo next to a silver bullet" ></p>

<h2>The Docker love phase</h2>

<p>At first everything seemed great about Docker. I&rsquo;d used it on toy projects and it proved great to quickly setup cheap and fast virtual machines. I even created the <a href="https://github.com/philou/rubybox">Rubybox</a> project on Github to clone new ruby VMs in a matter of seconds. I also used Docker to host my <a href="http://octopress.org/">Octopress</a> environment to write this blog. As a long time Linux user, my dev machines have repeatedly been suffering from pollution : after some time, they get plagued with all the stuff I installed to do my various dev experiments, and at some point, re-install seems easier than cleaning up all the mess. If I could use containers for all my projects, Docker would be a cure for this.</p>

<p>Going through all these successes, when I started my planning poker app, I decided to go all into Docker, development, CI and deployment. You can read the log of how I did that in <a href="http://philippe.bourgau.net/blog/categories/docker/">these posts</a>. Fast forward a bit of searching, experimenting and deploying, all was setup : my dev env was in containers, my CI was running in containers in <a href="https://circleci.com/gh/philou/planning-poker/tree/master">CircleCI</a> and the app was pushed to containers on <a href="https://www.digitalocean.com/">DgitalOcean</a>.</p>

<h2>Reality strikes back</h2>

<p>At first, everything seemed to be working fine. Even if there were a few glitches that I would have to fix down the road like :</p>

<ul>
<li>Whenever I wanted to update my app&rsquo;s dependencies, I had to run <code>bundle update</code> twice, and not incrementally. Surely, I would manage to fix that with a bit of time</li>
<li>Obviously, the CI was slower, because it had to build the containers before deploying them to <a href="https://hub.docker.com/">Docker Hub</a>, but that was the price to pay in order to know exactly what was running on the server &hellip; right ?</li>
<li>And &hellip; <a href="https://github.com/guard/guard">Guard</a> notifications did not appear on my desktop. I was accessing my dev env through ssh, so I would have to fix that, just a few hours and it should be working</li>
</ul>


<p>After a while, I got used to my work environment and became almost as productive as I used to be &hellip; but you know, shit happens !</p>

<ul>
<li>I had to install <a href="http://phantomjs.org/">PhantomJS</a> on my CI, and if that comes out of the box on <a href="https://travis-ci.org/">TravisCI</a>, you&rsquo;re all alone in your own containers. Installing this on the Debian container proved unnecessarily complex, but I figured it out</li>
<li>Then all of a sudden, my CI started to break &hellip; You can read a summary of what I did to fix it <a href="/how-i-fixed-devicemapper-error-when-deploying-my-docker-app/">here</a>. Long story short : I had forgotten to clean up old docker images, and after enough deployments, the server ran out of space, and that corrupted the docker cache somehow. I eventually re-installed and upgraded the deployment VM. That made me lose quite some time though.</li>
<li>Finally, as I started to play with <a href="https://github.com/rails/actioncable">ActionCable</a>, I could not get the web-socket notifications through my dev host. There must be some settings and configuration to make this work, for sure, but it&rsquo;s supposed to work out of the box.</li>
</ul>


<p>Eventually, this last issue convinced me to change my setup. All these usages of Docker where definitely worth it from a learning point of view, but as my focus moved to actually building the app, it was time to take pragmatic decisions.</p>

<h2>My use of Docker now</h2>

<p>There were 2 main ideas driving my changes to my dev env for this open source side project :</p>

<ol>
<li>Use the thing most people do</li>
<li>Use commercially supported services &amp; tools</li>
</ol>


<p>These should avoid losing my time instead of being productive. My setup is now almost boring ! To summarize I now use <a href="https://travis-ci.org/philou/planning-poker">TravisCI</a>, <a href="https://philous-planning-poker.herokuapp.com/">Heroku</a>, and <a href="https://github.com/rbenv/rbenv">rbenv</a> on my physical machine. I kept Docker where it really shines : all the local servers required for development are managed by <a href="https://docs.docker.com/compose/">Docker Compose</a>. Here is my <a href="https://github.com/philou/planning-poker/blob/master/docker-compose.yml"><code>docker-compose.yml</code></a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">db</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">postgres:9.4.5</span>
</span><span class='line'>  <span class="l-Scalar-Plain">volumes</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">planning-poker-postgres:/var/lib/postgresql/data</span>
</span><span class='line'>  <span class="l-Scalar-Plain">ports</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="s">&quot;5432:5432&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="l-Scalar-Plain">redis</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">redis:3.2-alpine</span>
</span><span class='line'>  <span class="l-Scalar-Plain">volumes</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">planning-poker-redis:/var/lib/redis/data</span>
</span><span class='line'>  <span class="l-Scalar-Plain">ports</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="s">&quot;6379:6379&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This saves me from installing <a href="https://www.postgresql.org/">Postgresql</a> or <a href="https://redis.io/">Redis</a> on my dev machine, and I can start all the services required for app with a single <code>docker-compose up</code> command !</p>

<h2>My future uses of Docker</h2>

<p>More generally, in the near future, here is when I&rsquo;ll use docker</p>

<ul>
<li>As I just said, to manage local servers</li>
<li>To boot quick and cheap VMs (check <a href="https://github.com/philou/rubybox">rubybox</a>)</li>
<li>To handle CI and deployment of large or non-standard systems, where Docker can provide a lot of benefits in terms of price, scaling or configurability</li>
</ul>


<p>Docker came from the deployment world, and this is where it is so great. As of today though, even if it is usable as dev VM, it is still not up to a standard dev machine. Despite that, all the issues I ran into could be fixed, and I&rsquo;m pretty sure they&rsquo;ll be some day.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/developer-are-you-losing-your-rat-race/">Developer ! Are You Losing Your Rat Race ?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-02-09T05:37:00+00:00" pubdate data-updated="true">Feb 9<span>th</span>, 2017</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>A rat race is an endless, self-defeating, or pointless pursuit. It conjures up the image of the futile efforts of a lab rat trying to escape while running around a maze or in a wheel.</p></blockquote>

<p>Are we building our own <del>maze</del> self defeating landscape by our exacerbated focus on technology ? Let me explain.</p>

<p><img class="center" src="/imgs/2017-02-09-developer-are-you-losing-your-rat-race/rat-maze.jpg" title="A rat in a maze" ></p>

<h2>The context</h2>

<p>As <a href="https://en.wikipedia.org/wiki/Marc_Andreessen">Marc Andreessen</a> famously said &ldquo;Software is eating the world&rdquo;, which means that there is more and more demand for software. At the same time, giant countries like China, India, Russia or Brazil are producing more and more master&rsquo;s degrees every year. This also means more and more software engineers. The consequence is that there has never been so many new technologies emerging than these days. The software landscape his huge, growing and complex.</p>

<p>That&rsquo;s great for progress, but it&rsquo;s a puzzle for hiring. In this chaotic environment, years of experience with a particular technology is something that remains easy to measure, that&rsquo;s why employers (and developers) tend to use keywords to cast for a job.</p>

<h2>The effects</h2>

<p>As a result, developers tend to pick a few technologies to become masters at, to put them on their CV and get job offers. There&rsquo;s a danger with specializing on a particular technology : eventually, it will become deprecated, in this keyword driven world, it&rsquo;s almost like if you&rsquo;ll have to start from zero again. Even if a specialization is wide enough now, as time goes on and more and more technologies are created, any area of expertise will become a tiny spot in all the landscape. One might think this is only an issue for old guys that did not stay up to date &hellip; I strongly believe this is wrong, it happened to all past technologies, I don&rsquo;t see why today&rsquo;s latest .js framework wouldn&rsquo;t be legacy stuff one day.</p>

<p>One could think that sticking to a good employer is a good fix against that. It is &hellip; for some time ! Sticking to an company actually means <em>betting</em> on this company. What would happen if it went out of business, or through difficult times and you&rsquo;re asked to leave ? When you reach the job market after so long with a single employer, you&rsquo;ll be a de-facto specialist, on proprietary stuff that no one is interested about.</p>

<p>Finally, you might work hard not to specialize, but it&rsquo;s going to be a lot more difficult to get a job as a generalist, only a few shops actually hire this way.</p>

<p>To summarize, we are forced into specialization, which is great in the short term, but risky in the long run.</p>

<h2>1€ advice</h2>

<p>So what can we do about this ? Obviously, we cannot change the world &hellip; The only ones we can act on are ourselves !</p>

<h3>Learning</h3>

<p>In our fast moving tech world, learning remains key ! But instead of trying to keep up with all the cool new techs that are invented every day, we should study fundamental skills, and only learn just enough specific skills to get the job done. To me fundamental skills are all the things you&rsquo;ll apply whatever the language and technology you are using, for example :</p>

<ul>
<li>design</li>
<li>architecture (whatever that is &hellip;)</li>
<li>clean code</li>
<li>refactoring</li>
<li>legacy code</li>
<li>testing</li>
<li>tooling</li>
<li>mentoring &amp; coaching</li>
<li>programming paradigms (functional, dynamic, static, imperative, OO, concurrent &hellip;)</li>
<li>process flow</li>
<li>communication</li>
<li>product definition</li>
<li>concurrency</li>
<li>performance</li>
</ul>


<p>I wrote <a href="http://philippe.bourgau.net/how-to-keep-up-with-software-technologies/">this post</a> that explains how I did learn some of these skills (by no mean would I say that this is the only way). Good mastery of these skills should be enough to quickly get up to speed in any project you are involved. This other article <a href="https://blog.bradfieldcs.com/in-2017-learn-every-language-59b11f68eee#.l2n6kouuz">In 2017, learn <em>every</em> language</a>, which I found through the excellent <a href="http://www.hackernewsletter.com/">hackernewsletter</a>, explains how this is possible.</p>

<p>Unfortunately, knowing is not enough &hellip;</p>

<h3>Selling</h3>

<p>How do you convince others that you are up to the job in a particular technology ? Unfortunately, I don&rsquo;t have a definitive answer yet &hellip;</p>

<p>Regularly, people try to coin a word to describe the competent generalist developer : polyglot, full stack, craftsman &hellip; If it&rsquo;s good enough, it usually gets taken over quite fast by the industry and just becomes yet another buzzword (the only exception being eXtreme Programming, but who would like to hire and eXtreme Programmer ?).</p>

<p>In <a href="https://www.amazon.com/Soft-Skills-software-developers-manual/dp/1617292397/ref=sr_1_1?tag=pbourgau-20&amp;amp;ie=UTF8&amp;qid=1473135683&amp;sr=8-1&amp;keywords=soft+skills">Soft Skills</a>, John Somnez says the trick is to explain to people that you might not have experience in a technology &lsquo;yet&rsquo;. This might work, if your resume gets through, which is not sure.</p>

<p>Here&rsquo;s my try : the next time I&rsquo;ll polish my resume, I&rsquo;ll try to put forward my fundamental skills first, for example with 5 stars self-assessments. Only after will I add something like &ldquo;By the way, I could work with tech X Y Z &hellip;&rdquo;.</p>

<h3>Independence</h3>

<p><a href="https://www.amazon.com/End-Jobs-Meaning-9-5/dp/1619613352/ref=sr_1_1?tag=pbourgau-20&amp;amp;ie=UTF8&amp;qid=1486713381&amp;sr=8-1&amp;keywords=the+end+of+jobs"><img class="center" src="/imgs/2017-02-09-developer-are-you-losing-your-rat-race/the-end-of-jobs.jpg" title="Cover of the book 'The End of Jobs'" ></a></p>

<p>Being your own boss could be a solution in the long term. I recently listened to <a href="https://www.amazon.com/End-Jobs-Meaning-9-5/dp/1619613352/ref=sr_1_1?tag=pbourgau-20&amp;amp;ie=UTF8&amp;qid=1486713381&amp;sr=8-1&amp;keywords=the+end+of+jobs">The End of Jobs</a> in which the author explains that entrepreneurship is an accessible alternative these days, and that like any skill, it&rsquo;s learnable. The catch is that there are no schools, no diplomas, and that it seems a lot riskier in the short run. Despite that, he makes the point that the skills you&rsquo;ll learn makes it quite safe in the long run !</p>

<h2>Questions</h2>

<p>I feel like my post asks more questions than it provides answers :&ndash;). Honestly, I&rsquo;d really love to read other people&rsquo;s opinions and ideas. What are your tricks to market yourself on new technologies ? As a community, what could we do to fight our planned obsolescence ? Do you think I&rsquo;m totally wrong and that the problem does not exist ? What do you think ?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/how-i-fixed-devicemapper-error-when-deploying-my-docker-app/">How I Fixed &#8216;Devicemapper&#8217; Error When Deploying My Docker App</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-02-01T17:41:00+00:00" pubdate data-updated="true">Feb 1<span>st</span>, 2017</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A few months ago, I started continuously deploying my <a href="https://github.com/philou/planning-poker">latest side project</a> to a <a href="https://cloud.digitalocean.com">Digital Ocean</a> box. If you are interested, <a href="/continuously-deliver-a-rails-app-to-your-digital-ocean-box-using-docker/">here</a> is the full story of how I did it. All was going pretty well until last week, when the builds unexpectedly started to fail. I wasn&rsquo;t getting the same error at every build, but it was always the <a href="https://www.docker.com/">Docker</a> deployment that failed. Here are the kind of errors I got :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># At first, it could not connect to the db container</span>
</span><span class='line'>PG::ConnectionBad: could not translate host name <span class="s2">&quot;db&quot;</span> to address: Name or service not known
</span><span class='line'>
</span><span class='line'><span class="c"># Then I started to have weird EOF errors</span>
</span><span class='line'>docker stderr: failed to register layer: ApplyLayer <span class="nb">exit </span>status 1 stdout:  stderr: unexpected EOF
</span><span class='line'>
</span><span class='line'><span class="c"># Eventually, I got some devicemapper errors</span>
</span><span class='line'>docker stderr: failed to register layer: devicemapper: Error running deviceCreate <span class="o">(</span>createSnapDevice<span class="o">)</span> dm_task_run failed
</span></code></pre></td></tr></table></div></figure>


<p>You can read the full error logs <a href="https://circleci.com/gh/philou/planning-poker/tree/master">here</a>.</p>

<h2>That&rsquo;s what happens when you go cheap !</h2>

<p>After searching the internet a bit, I found <a href="https://github.com/docker/docker/issues/6325">this issue</a> which made me understand that my server had ran out of disk space because of old versions of my docker images. I tried to remove them, but the commands were failing. After some more search, I found <a href="https://github.com/docker/docker/issues/26015">this other issue</a> and came to the conclusion that there was no solution except resetting docker completely. Hopefully, Digital Ocean has a button for rebuilding the VM.</p>

<p><a href="/imgs/2017-02-01-how-i-fixed-devicemapper-error-when-deploying-my-docker-app/reset-digitalocean.jpg"><img class="center" src="/imgs/2017-02-01-how-i-fixed-devicemapper-error-when-deploying-my-docker-app/reset-digitalocean-small.jpg" title="A screenshot of the rebuild screen on digitalocean" ></a></p>

<p>Once the VM was rebuilt, the first thing that I did was to try to connect from my shell on my local machine. I had to clean up my known host file, but that was simple enough.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>nano ~/.ssh/known_hosts
</span></code></pre></td></tr></table></div></figure>


<p>Once this was done, I just followed the steps I had documented in my <a href="/continuously-deliver-a-rails-app-to-your-digital-ocean-box-using-docker/">previous blog post</a></p>

<p>Was I all done ?</p>

<p>Almost &hellip; I ran into another kind of errors this time. Processes kept getting killed on my VM.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>INFO <span class="o">[</span>cc536697<span class="o">]</span> Running /usr/bin/env docker-compose -f docker-compose.production.yml run app bundle <span class="nb">exec </span>rake db:migrate as root@104.131.47.10
</span><span class='line'>rake aborted!
</span><span class='line'>SSHKit::Runner::ExecuteError: Exception <span class="k">while </span>executing as root@104.131.47.10: docker-compose <span class="nb">exit </span>status: 137
</span><span class='line'>docker-compose stdout: Nothing written
</span><span class='line'>docker-compose stderr: Starting root_db_1
</span><span class='line'>bash: line 1: 18576 Killed
</span></code></pre></td></tr></table></div></figure>


<p>After some more Google searching, I discovered that this time, the VM was running out of memory ! The fast fix was to upgrade the VM (at the extra cost of 5$ / month).</p>

<p><a href="/imgs/2017-02-01-how-i-fixed-devicemapper-error-when-deploying-my-docker-app/resize-digitalocean.jpg"><img class="center" src="/imgs/2017-02-01-how-i-fixed-devicemapper-error-when-deploying-my-docker-app/resize-digitalocean-small.jpg" title="A screenshot of the resize screen on digitalocean" ></a></p>

<p>After increasing the memory (and disk space) of the VM, deployment went like a charm. Others have fixed the same issue for free by <a href="https://www.digitalocean.com/community/questions/npm-gets-killed-no-matter-what">adding a swap partition to the VM</a>.</p>

<h2>The end of the story</h2>

<p>I wasted quite some time on this, but it taught me some lessons :</p>

<ol>
<li>I should have taken care of cleaning up the old images and containers, at least manually, at best automatically</li>
<li>I should write a script to provision a new server</li>
<li>The cheap options always come at a cost</li>
<li>For an open source side project like this one, it might be a better strategy to only use Docker to setup my dev env, and use free services like <a href="https://travis-ci.org/">Travis-ci</a> and <a href="https://www.heroku.com/">Heroku</a> for production</li>
<li>Doing everything myself is not a good recipe to getting things done &hellip; I well past time I leave my developer hat for an entrepreneur cap</li>
<li>In order to keep learning and experimenting, focused <a href="/how-i-got-my-feet-wet-with-machine-learning-with-the-first-20-hours/">20h sessions</a> of deliberate practice might be the most time effective solution</li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/5-minutes-hack-to-speed-up-rspec-in-rails-5-using-in-memory-sqlite/">5 Minutes Hack to Speed Up RSpec in Rails 5 Using In-memory SQLite</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-01-25T07:53:00+00:00" pubdate data-updated="true">Jan 25<span>th</span>, 2017</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Here is the story : you have a <a href="http://rubyonrails.org/">Rails 5</a> app that uses <a href="http://rspec.info/">RSpec</a>, but your RSpec suite is getting slower and slower to run. You&rsquo;ve already considered some solutions :</p>

<ul>
<li>Use <a href="https://sqlite.org/">SQLite</a> in memory for your test env.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">test</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="l-Scalar-Plain">adapter</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">sqlite3</span>
</span><span class='line'>  <span class="l-Scalar-Plain">database</span><span class="p-Indicator">:</span> <span class="s">&quot;:memory:&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s the most straightforward thing to do, but unfortunately, if you are sharing your test env with <a href="https://cucumber.io/">Cucumber</a>, you might want to use a production like DB with Cucumber (<a href="https://www.postgresql.org/">PostgreSQL</a> or whatever). So unless you are ready to setup a new env for cucumber (which I tried and don&rsquo;t recommend) you&rsquo;re stuck.</p>

<ul>
<li>Use mocks. That&rsquo;s surely going to work, it&rsquo;s going to make your test hell of a lot faster ! It will also make your tests a lot more fragile and more expensive to maintain &hellip; If you want to read more about why I think mocks are a bad idea, just have a look at <a href="/blog/categories/mocking/">these posts</a>.</li>
</ul>


<h2>The hack</h2>

<p>Here is a third alternative, I&rsquo;ve <a href="/simplest-way-to-speed-up-rspec-with-in-memory-sqlite-db/">already written about it</a>, but here it comes updated and tested for Rails 5 :</p>

<ol>
<li>Don&rsquo;t change anything to your <code>config/database.yml</code></li>
<li>Obviously, you&rsquo;ll need to add <code>sqlite3</code> to your <code>Gemfile</code></li>
<li>At the beginning of your <code>spec/rails_helper.rb</code>, replace</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># Checks for pending migration and applies them before tests are run.</span>
</span><span class='line'><span class="c1"># If you are not using ActiveRecord, you can remove this line.</span>
</span><span class='line'><span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Migration</span><span class="o">.</span><span class="n">maintain_test_schema!</span>
</span></code></pre></td></tr></table></div></figure>


<p>with</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># In order to keep the same RAILS_ENV for rspec and cucumber, and to make rspec</span>
</span><span class='line'><span class="c1"># faster, patch the connection to use sqlite in memory when running rspec</span>
</span><span class='line'><span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span><span class="o">.</span><span class="n">establish_connection</span><span class="p">(</span><span class="ss">adapter</span><span class="p">:</span> <span class="s1">&#39;sqlite3&#39;</span><span class="p">,</span> <span class="ss">database</span><span class="p">:</span> <span class="s1">&#39;:memory:&#39;</span><span class="p">)</span>
</span><span class='line'><span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Schema</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="kp">false</span>
</span><span class='line'><span class="nb">load</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">Rails</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="s2">/db/schema.rb&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s it ! Run your specs &hellip; not bad for a 5 minutes investment !</p>

<h4>Rails 5.1 (2017-03-29 Edit)</h4>

<p>My fresh hack started to fail on Rails 5.1 ! If <code>schema.rb</code> is generated with the Postgres adapter, it is now incompatible with this injected Sqlite adapter. Here is a patch that removes the glitches :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># In order to keep the same RAILS_ENV for rspec and cucumber, and to make rspec</span>
</span><span class='line'><span class="c1"># faster, patch the connection to use sqlite in memory when running rspec</span>
</span><span class='line'><span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span><span class="o">.</span><span class="n">establish_connection</span><span class="p">(</span><span class="ss">adapter</span><span class="p">:</span> <span class="s1">&#39;sqlite3&#39;</span><span class="p">,</span> <span class="ss">database</span><span class="p">:</span> <span class="s1">&#39;:memory:&#39;</span><span class="p">)</span>
</span><span class='line'><span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Schema</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="kp">false</span>
</span><span class='line'><span class="c1"># load db agnostic schema by default. Needed to remove the &quot;, id: :serial&quot; from</span>
</span><span class='line'><span class="c1"># the table definitions to make it load on sqlite</span>
</span><span class='line'><span class="nb">eval</span><span class="p">(</span><span class="sb">`cat </span><span class="si">#{</span><span class="no">Rails</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">to_s</span><span class="si">}</span><span class="sb">/db/schema.rb | sed &#39;s/,[^:]*: :serial\//g&#39;`</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>I admit this is getting a bit crappy, and I don&rsquo;t know how long it is going to work &hellip;</p>

<h2>One more thing &hellip;</h2>

<p>If you need even more speed, you can now run your specs in parallel in different processes ! Each in-memory SQLite DB is bound to its process, so unlike a real PostgreSQL dev DB, you won&rsquo;t get any conflicts between your tests ;&ndash;)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/a-plain-english-introduction-to-paxos-protocol/">A Plain English Introduction to Paxos Protocol</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-01-16T08:20:00+00:00" pubdate data-updated="true">Jan 16<span>th</span>, 2017</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A few weeks ago, I had to have a look at the distributed consensus protocol <a href="https://en.wikipedia.org/wiki/Paxos_%28computer_science%29">Paxos</a>. Even though I know its purpose and I&rsquo;ve built and used distributed systems and databases in the past, Paxos remains mind boggling at first !</p>

<h2>The hard way</h2>

<p>The best overall description I found is <a href="https://www.quora.com/Distributed-Systems-What-is-a-simple-explanation-of-the-Paxos-algorithm">this answer by Vineet Gupta on Quora</a>. After turning my head around it for a while, I finally gained the instinctive understanding which comes when you &lsquo;get&rsquo; something.</p>

<p>As a way to both help others to understand Paxos faster and to burn all this in my own memory, I though it would he a good idea to illustrate it as a story (I was inspired by <a href="http://ksat.me/a-plain-english-introduction-to-cap-theorem/">A plain English introduction to CAP Theorem</a> which I found really instructive; I also later discovered that the <a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/12/The-Part-Time-Parliament.pdf">original Paxos paper</a> itself related the protocol using the metaphor of a parliament).</p>

<p><img class="center" src="/imgs/2017-01-16-a-plain-english-introduction-to-paxos-protocol/greek.jpg" title="A drawing of an ancient Greek hero typing at a computer" ></p>

<h2>Once upon a time &hellip;</h2>

<p>&hellip; there were 3 brothers and sisters, Kath, Joe &amp; Tom, living happily. They lived far away, and it was not easy for them to meet and spend some time together. Neither did they have phone or internet, for this was a long time ago. All they had to discuss and share news was good old mail &hellip;</p>

<p>Unfortunately, one day, the worst happened : their parents die. All 3 are informed by a letter from the notary, telling them that they need to sell the family house in order to pay for their inherited debts. It also advises to use Paxos to agree on a price (Note : I never said the story was going to be chronologically sound !).</p>

<h2>The happy end</h2>

<p>As the oldest in the family, Kath decides to take things in hand, and starts the whole thing. She knows Paxos consists of 2 phases : &lsquo;prepare&rsquo; and &lsquo;accept&rsquo;.</p>

<h3>Prepare Phase</h3>

<p>Kath sends a signed and dated price value proposal to her brothers, by mail.</p>

<p>Joe and Tom both receive the letter from Kath, they think the price is fair. In order to send their agreements back to Kath, they make a copy of the proposition, mark it as agreed, date it, sign it, and send it back.</p>

<h3>Accept Phase</h3>

<p>Joe lives a bit further away from Kath than Tom does, so correspondence between Kath and Tom is usually faster. Kath indeed receives the agreement from Tom first, she knows she can go on with the protocol straight away, because Paxos relies on majority, and not unanimity. In his letter, Tom agreed to the same price she proposed, so she just picks this one as the final price to agree on.</p>

<p>She sends new letters, called accept letters this time, to her brothers to finalize the agreement. In these letters, she specifies the price that they are agreeing on, plus the date at which it was first suggested (see Prepare Phase). When Tom and Joe receive the accept letter, they simply need to check that the time and price of the proposal to make sure it is what they agreed on, before sending back their final accept letter.</p>

<p>At the time when Kath receives the accept letters from her brothers, everyone knows that the price has been agreed.</p>

<p><a href="https://www.taschen.com/pages/en/catalogue/children/all/06787/facts.the_fairy_tales_of_the_brothers_grimm.htm"><img class="center" src="/imgs/2017-01-16-a-plain-english-introduction-to-paxos-protocol/grimm-brothers.jpg" title="Cover of the book &#34;The Fairy Tales of the Grimm Brothers&#34;" alt="Cover of the book &#34;The Fairy Tales of the Grimm Brothers&#34;"></a></p>

<h3>After</h3>

<p>She then informs the notary on the agreed price. This one sends an information letter to the Kath, Tom &amp; Joe. The house is sold pretty quickly, leaving the family out of financial problems for the rest of their lives &hellip;</p>

<h2>Shit happens</h2>

<p>That story went unexpectedly well ! Let&rsquo;s see different variations about what would happen in real life.</p>

<h3>Joe is particularly slow to answer</h3>

<p>Joe has never been good at paperwork &hellip; he&rsquo;s always out partying and having fun, and he does not want to bother answering letters. When Joe receives the prepare letter from Kath, he does not reply straightaway but leaves it on his desk to handle later. Meanwhile, Tom answers as soon as he got the letter. As mentioned before, Paxos relies on majority, as soon as Kath gets Tom&rsquo;s answer, she can continue to the next phase. In fact, the accept phase also relies on majority, so she can continue to the end of the protocol if Tom continues to answer.</p>

<p>In this case, Joe would receive the accept letter before he sent his answer to the prepare letter, and would know that the consensus is moving on without him. He can try to catch up or not, but the consensus can be reach without him.</p>

<h3>Tom wants to speed things up by becoming the master</h3>

<p>Tom has always been the hurried brother. He does not like when things linger forever but prefers things to be done quickly. As soon as he receives the letter from the notary, he starts waiting impatiently for the prepare letter from his sister. Kath, on her part, takes a lot of time to settle on a price. Not knowing what is going on, Tom decides to take action, and to takes on the master role : he sends his own copies of the prepare letters. While these letters are in the mail, Kath finally settles on a price, and sends hers.</p>

<p>Joe gets Tom&rsquo;s proposal first. Thinking that it&rsquo;s a change in the plan, he responds straight away by signing the proposal and taking a copy for himself. The following day, he receives Kath&rsquo;s proposal ! He&rsquo;s a bit surprised, but hopefully, Paxos tells him exactly what to do in this situation. By agreeing to Tom&rsquo;s proposal, he made a promise to stick to it whatever happens later. Here the date on Kath&rsquo;s proposal is later than on Tom&rsquo;s, so Joe is going to answer to Kath that he agrees but to to Tom&rsquo;s proposal, of which he&rsquo;ll join a copy.</p>

<p>After receiving the Joe&rsquo;s agreement on his proposal, Tom has the majority, and should be able to end the protocol.</p>

<p>What about Kath ?</p>

<p>She should have received Tom&rsquo;s proposal, and rejected it, because she had already proposed a later value. That will not prevent Tom to reach a consensus.</p>

<p>She should have received Joe&rsquo;s agreement to Tom&rsquo;s proposal. The same way, she might as well have received Tom&rsquo;s agreement to his own proposal as an answer to hers. She&rsquo;d get the majority of agreements, so she might then want to push on. For the accept letter, she must pick a value that has been accepted, in this case, it&rsquo;s Tom&rsquo;s proposed value ! Everything ends as expected as she&rsquo;ll reach the same price as Tom.</p>

<h3>Tom wants a higher price an becomes the master</h3>

<p>Imagine Tom is obsessed about money ! When he receives Kath&rsquo;s proposal, he&rsquo;s outraged ! Believing the house has a lot more value than the proposed price, he sets on to act as a master in Paxos and sends his own proposal letters to his brother and sister.</p>

<p>Unfortunately, when they receive his proposal, they have already agreed to Kath&rsquo;s older proposal, so they send him back a copy of it as an agreement. Having received agreements to Kath&rsquo;s value only, he cannot push forward his value. Whether he continues his Paxos or not does not really matter, as he would reach the same value as Kath would.</p>

<h3>River flood split between brothers and Kath</h3>

<p><a href="http://riniwuzhere.deviantart.com/art/Fairytale-Map-of-Wurzburg-393850325"><img class="center" src="/imgs/2017-01-16-a-plain-english-introduction-to-paxos-protocol/fairytale-map.jpg" title="A drawing of a fairy tale map with a wide river in the middle" ></a></p>

<p>There&rsquo;s a wide river that separates Kath from Joe and Tom. While they were trying to reach consensus, the river flood, cutting all communication between the brothers and their sister. Kath might abort the consensus as she won&rsquo;t be able to get answers from the majority. On their side, Joe or Tom can takeover the consensus, take on the master role, and still reach a price, as they form a majority. As soon as the river would settle, the messages would arrive to both parties, eventually informing Kath that a price was accepted.</p>

<h3>Lots of others</h3>

<p>You can imagine zillions of ways in which the consensus between Kath, Joe and Tom could go wrong. For example :</p>

<ul>
<li>Mail is so slow that Kath sends new proposals</li>
<li>One letter gets lost and arrives after Kath made a new proposal</li>
<li>Kath is struck by a lightning</li>
</ul>


<p>Go ahead and execute Paxos step by step on all of them, you&rsquo;ll see that whatever happens, Kath, Joe and Tom will reach a price.</p>

<h2>More Formally</h2>

<p>Now that you have an instinctive understanding of Paxos, I encourage you to read out <a href="https://www.quora.com/Distributed-Systems-What-is-a-simple-explanation-of-the-Paxos-algorithm">the full explanation I found on Quora</a>. Here is a extract with the protocol part :</p>

<blockquote><h3>Protocol Steps:</h3>

<h4>1) Prepare Phase:</h4>

<ul>
<li><p>A node chooses to become the Leader and selects a sequence number x and value v to create a proposal P1(x, v). It sends this proposal to the acceptors and waits till a majority responds.</p></li>
<li><p>An Acceptor on receiving the proposal P1(x, v1) does the following:</p>

<ul>
<li>If this is the first proposal to which the Acceptor is going to agree, reply ‘agree’ – this is now a promise that the Acceptor would reject all future proposal requests &lt; x</li>
<li>If there are already proposals to which the Acceptor has agreed:
compare x to the highest seq number proposal it has already agreed to, say P2(y, v2)

<ul>
<li>If x &lt; y, reply ‘reject’ along with y</li>
<li>If x > y, reply ‘agree’ along with P2(y, v2)</li>
</ul>
</li>
</ul>
</li>
</ul>


<h4>2) Accept Phase</h4>

<ul>
<li><p>If a majority of Acceptors fail to reply or reply ‘reject’, the Leader abandons the proposal and may start again.</p></li>
<li><p>If a majority of Acceptors reply ‘agree’, the Leader will also receive the values of proposals they have already accepted. The Leader picks any of these values (or if no values have been accepted yet, uses its own) and sends a ‘accept request’ message with the proposal number and value.</p></li>
<li><p>When an Acceptor receives a ‘accept request’ message, it sends an ‘accept’ only if the following two conditions are met, otherwise it sends a ‘reject’:</p>

<ul>
<li>Value is same as any of the previously accepted proposals</li>
<li>Seq number is the highest proposal number the Acceptor has agreed to</li>
</ul>
</li>
<li><p>If the Leader does not receive an ‘accept’ message from a majority, abandon the proposal and start again. However if the Leader does receive an ‘accept’ from a majority, the protocol can be considered terminated. As an optimization, the Leader may send ‘commit’ to the other nodes.</p></li>
</ul>
</blockquote>

<p>And here are the key concepts to map my story to this formal description of Paxos.</p>

<table>
<thead>
<tr>
<th></th>
<th> Story </th>
<th> Paxos</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td> proposal letter (and copy of) </td>
<td> P(x,v)</td>
</tr>
<tr>
<td></td>
<td> Date (and time) </td>
<td> sequence number</td>
</tr>
</tbody>
</table>


<br/>


<p>At the time of slow mail based communication, using the date and time down to the second is enough to build up unique sequence numbers. In our current time of digital messages, it&rsquo;s another story, typical Paxos implementation assigns a different and disjoint infinite set of integers for every participant, it does not exactly follow &lsquo;time&rsquo;, but it&rsquo;s enough for the algorithm to work.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/what-happens-to-non-enthusiast-programmers-in-the-long-run/">What Happens to Non-Enthusiast Programmers in the Long Run ?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-01-10T05:57:00+00:00" pubdate data-updated="true">Jan 10<span>th</span>, 2017</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A few months ago, after receiving good feedback from my regular readers, I posted my latest article <a href="/is-there-any-room-for-the-not-passionate-developer/">Is There Any Room for the Not-Passionate Developer ?</a> on <a href="https://news.ycombinator.com/">Hackernews</a> and <a href="https://www.reddit.com/r/programming/">Reddit</a>. I got a <a href="/how-to-use-hackernews-and-reddit-for-blogging/">huge number of visits</a>, a lot more than I typically get !</p>

<p>I also got a lot more comments, some nice, some tough, some agreeable and some challenging !</p>

<p><img class="center" src="/imgs/2017-01-10-what-happens-to-non-enthusiast-programmers-in-the-long-run/professional.jpg" title="A logo of a guy wearing a suit" ></p>

<h2>First, a summary</h2>

<p>In this previous article, I wanted to contrast the different views about work/life balance in the software industry.</p>

<p>Some, like agile gurus and companies like Basecamp, and <a href="http://lifehacker.com/working-over-40-hours-a-week-makes-you-less-productive-1725646811">studies</a>, strongly advocate for sane work hours. They explain that it results in greater productivity and healthy life.</p>

<p>On the other hand, the software field is always bubbling with novelty, and keeping up to date with technologies is by itself a challenge that takes time. For some companies, which might already be fighting for their survival against competition, it is almost impossible to grant some extra training time to their employees. The problem becomes particularly difficult when engineers get older, become parents and cannot afford to spend some extra time learning the latest JavaScript framework.</p>

<p>As a conclusion, I said that for most of us, it&rsquo;s really difficult to remain a developer in the long run without the grit that only passion for programming brings. I encourage you to <a href="/is-there-any-room-for-the-not-passionate-developer/">read it</a> for more details.</p>

<h2>What I learned from the comments</h2>

<p>First of all, thanks a lot for all these, they were very valuable, they forced me to think even more about the issue.</p>

<h3>People have been burnt !</h3>

<p>The word &lsquo;passion&rsquo; in particular, triggered engaged comments. As some pointed out, &lsquo;enthusiast&rsquo; or &lsquo;professional&rsquo; should be favored. It seems that some companies have asked their employees for unquestionable passion for their business (and not for engineering or programming) at the cost of the people&rsquo;s own lives. As a commenter said, a lot of shops do not integrate the absolute necessity for their programmers to learn continuously in their business model. It made me kind of sad to feel once more this state of our industry.</p>

<p>As a result, people are weary of any statement of &lsquo;passion&rsquo; in the workplace, and would prefer to be seen as very skilled professional, dedicated to keeping their skills up to date.</p>

<h3>The particular question of France</h3>

<p><img class="center" src="/imgs/2017-01-10-what-happens-to-non-enthusiast-programmers-in-the-long-run/france.jpg" title="A photo of the Eiffel tower" ></p>

<p>I received some comments from all over the world, but my observations came from where I work : in France. Here, all in all, we have at least 7 weeks of paid leaves per year. It&rsquo;s a lot more than in other parts of the world. I think it&rsquo;s around 2 weeks in the US (other <a href="https://www.bloomberg.com/news/articles/2016-10-18/americans-work-25-more-than-europeans-study-finds">sources</a> point the same fact). Imagine two companies, one from France, and one from the US. The one in the US can invest 5 weeks per year in exploratory learning (which can result in good things for both the business and the employee) while still producing as much as the french one.</p>

<p>Obviously, there are other parameters to take into account for overall productivity like hours per day, the effects of holidays or long hours on creativity, or funding &hellip; but here are some facts about software engineering in France :</p>

<ul>
<li>20% time policy, hackathons and other exploratory learning are extremely rare (I&rsquo;ve seen it once in 15 years)</li>
<li>It&rsquo;s slowly getting better, but if you remain a programmer in your thirties, you&rsquo;re seen as a loser</li>
<li>France has no software powerhouse like Microsoft, Google, Apple &hellip;</li>
</ul>


<p>This lead me to this open question : What&rsquo;s the effect of the 7 weeks of paid leaves on the french software industry ?</p>

<p>By no means will I try to give an answer, I just don&rsquo;t know. Plus, for those who might be wondering : I love my 7 weeks of holidays !</p>

<h2>The conclusion I came to</h2>

<p>Yet, I can try to draw a conclusion at the individual level. In France, if you&rsquo;re not really enthusiastic about programming, you won&rsquo;t put the extra effort off-the-job to learn the latest technologies. Within a few years, you&rsquo;ll be &lsquo;deprecated&rsquo;, which will leave you with mainly 2 options :</p>

<ul>
<li>become a manager</li>
<li>stick to your current codebase (and become completely dependent of your employer)</li>
</ul>


<p>To me, the sad truth is that if you want to make a career as a professional developer in France, you&rsquo;d better be ready to spend some of your free time practicing !</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <div id="google_translate_element"></div>
  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({pageLanguage: 'en', includedLanguages: 'fr', layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL, gaTrack: true, gaId: 'UA-30589315-1'}, 'google_translate_element');
    }
  </script>
  <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</section>
<section>
	<span>
		<img src="http://www.gravatar.com/avatar/686399bd630ecc9381e4dfec8720816e?s=260" alt="Gravatar of Philippe Bourgau " title="Gravatar of Philippe Bourgau" />
	</span>
</section>
<section>
  <h1>About Me</h1>
  <p>Philippe Bourgau, Happiness and Productivity Hacker</p>
  <p>Officialy, Developer</p>
  <p>Currently, developer, architect, manager & agile coach in my risk engine team at <a href="http://www.murex.com">Murex</a>; self proclaimed change agent in the company; serial side project builder at night; devoted family guy.</p>
  <ul>
    <li><a href="http://www.linkedin.com/pub/philippe-bourgau/8/a92/607">Linkedin profile</li></a>
    <li><a href="https://dl.dropbox.com/u/206938/cv%20philippe%20bourgau.pdf">Resume</a></li>
  </ul>
</section>
<section>
  <h1>Open Source Projects</h1>
  <ul>
    <li><a href="http://philous-planning-poker.herokuapp.com">Philou&#8217;s Planning Poker</a> : Better poker estimates for remote teams ! (In Progress)</li>
    <li><a href="/storexplore">Storexplore</a> : Transform online stores into APIs !</li>
    <li><a href="/rspecproxies">RSpecProxies</a> : Simplify RSpec mocking with test proxies !</li>
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/philou">@philou</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'philou',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/13-tricks-for-successful-side-projects/">13 Tricks for Successful Side Projects</a>
      </li>
    
      <li class="post">
        <a href="/side-projects-matter/">Side Projects Matter</a>
      </li>
    
      <li class="post">
        <a href="/speed-up-the-tdd-feedback-loop-with-better-assertion-messages/">Speed up the TDD feedback loop with better assertion messages</a>
      </li>
    
      <li class="post">
        <a href="/20-bad-excuses-for-not-writing-unit-tests/">20 Bad Excuses For Not Writing Unit Tests</a>
      </li>
    
      <li class="post">
        <a href="/from-apprentice-to-master-how-to-learn-tdd-test-driven-development/">From apprentice to master, how to learn TDD (Test Driven Development)</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Friend&#8217;s blogs</h1>
  <ul>
    <li><img class="logo link" src="https://avatars2.githubusercontent.com/u/40221?v=3&s=24" /><a href="https://abailly.github.io/">Arnaud Bailly&#8217;s blog</a></li>
    <li><img class="logo link" src="https://www.murex.com/sites/default/files/favicon.ico" /> <a href="http://www.murex.com/">Murex (my company)</a></li>
    <li><img class="logo link" src="https://avatars0.githubusercontent.com/u/2824069?v=3&s=24" /><a href="http://tpierrain.blogspot.fr/">Thomas&#8217; blog</a></li>
    <li><img class="logo link" src="https://avatars3.githubusercontent.com/u/11088496?v=3&s=24" /><a href="https://ahmadatwi.me/">Ahmad Atwi&#8217;s blog</a></li>
    <li><img class="logo link" src="http://bilal.eltayara.net/favicon.png" /><a href="http://bilal.eltayara.net/">Bilal El Tayara&#8217;s blog</a></li>
    <li><img class="logo link" src="http://sthiery.blogspot.fr/favicon.ico" /><a href="http://sthiery.blogspot.fr/">Sylvain&#8217;s blog (french)</a></li>
    <li><img class="logo link" src="https://avatars2.githubusercontent.com/u/732436?v=3&s=24" /><a href="http://www.pgourlain.fr/">Pierrick&#8217;s website (french)</a></li>
  </ul>
</section>




  
</aside>

      </div>
    </div>
    <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Philippe Bourgau -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>. Design by <a href="http://octopressthemes.com">Octopress Themes</a>.</span>
</p>

</footer>
    

<script type="text/javascript">
      var disqus_shortname = 'philippe-bourgau';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </div>
</body>
</html>
