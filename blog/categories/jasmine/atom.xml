<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: jasmine | Philippe Bourgau's blog]]></title>
  <link href="http://philippe.bourgau.net/blog/categories/jasmine/atom.xml" rel="self"/>
  <link href="http://philippe.bourgau.net/"/>
  <updated>2018-03-15T06:14:55+01:00</updated>
  <id>http://philippe.bourgau.net/</id>
  <author>
    <name><![CDATA[Philippe Bourgau]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[How to mock your browser's timezone with Jasmine and MomentJS]]></title>
    <link href="http://philippe.bourgau.net/how-to-mock-your-browsers-timezone-with-jasmine-and-momentjs/"/>
    <updated>2017-03-30T06:29:00+02:00</updated>
    <id>http://philippe.bourgau.net/how-to-mock-your-browsers-timezone-with-jasmine-and-momentjs</id>
    <content type="html"><![CDATA[<p>Last week, I&rsquo;ve been working at adding a distributed countdown to my <a href="https://github.com/philou/planning-poker">Online Planning Poker App</a>. As our team works from Paris and Beirut, I wanted to unit test that it would work well through different timezones. I found a surprisingly simple solution.</p>

<h2>What Google told me</h2>

<p>I first searched Google to see how to do it. I found 2 answers that looked promising :</p>

<ul>
<li><a href="https://balanceiskey.github.io/2016/01/27/mocking-timezones.html">You can use moment-timezone to mock timezones in Jasmine</a> which I unfortunately did not manage to use</li>
<li><a href="http://stackoverflow.com/questions/12220717/how-to-mock-the-browsers-timezone">How to mock the browser&rsquo;s timezone?</a> which seemed a bit of hack</li>
</ul>


<p>Known results for such a simple situation were disappointing !</p>

<h2>What I ended up with</h2>

<p>After a good deal of dabbling around, I eventually found a pretty simple solution using <a href="https://jasmine.github.io/">Jasmine</a> and <a href="https://momentjs.com/timezone/">Moment Timezone</a> :</p>

<p><code>javascript
jasmine.clock().install();
...
jasmine.clock().mockDate(moment.tz("2017-03-23 10:00:00", "Europe/Paris").toDate())
</code></p>

<p>Obviously, the drawback is that it implies setting both the timezone <em>and the time</em>. This should be ok in most of unit tests though, but might be an issue in some cases.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Jasmine and coffeescript setup for rails]]></title>
    <link href="http://philippe.bourgau.net/jasmine-and-coffeescript-setup-for-rails/"/>
    <updated>2013-07-04T07:44:00+02:00</updated>
    <id>http://philippe.bourgau.net/jasmine-and-coffeescript-setup-for-rails</id>
    <content type="html"><![CDATA[<p>As I started to write more javascript code in my <a href="https://www.mes-courses.fr">rails app</a>, it became obvious that I should be testing it ! I wanted to use <a href="http://pivotal.github.io/jasmine/">jasmine</a> and <a href="http://coffeescript.org">coffeescript</a>. I searched a long time to find out what was the most common and supported setup for a rails app, so now I recommand</p>

<p><code>ruby
gem 'jasmine'
gem 'jasminerice'
gem 'guard-jasmine'
</code></p>

<ul>
<li>The <a href="https://github.com/pivotal/jasmine-gem">jasmine gem</a> is by far the most common jasmine gem, it is supported by <a href="http://pivotallabs.com">Pivotal Labs</a> so there is no fear of it being droped soon.</li>
<li>The <a href="https://github.com/netzpirat/guard-jasmine">guard-jasmin gem</a> is supported by <a href="https://mksoft.ch">MKSoft</a>, and is not only handling continuous <a href="http://phantomjs.org/">phantomjs</a> headless jasmine testing through guard, but it also provides command line and rake tools to run your jasmine specs during continuous integration.</li>
<li>Eventually, the <a href="https://github.com/bradphelan/jasminerice">jasminerice gem</a> makes it easy to write your jasmine specs with coffeescript. It also wraps a version of <a href="https://github.com/velesin/jasmine-jquery">jasmine-jquery</a> to assist client javascript testing. Although there is a &ldquo;looking for maintainer&rdquo; message on the README page, there are some recent commits, so it seems that pull requests are still being merged even if the project is not actively developpped anymore &hellip; I belive volunteers are welcome.</li>
</ul>


<p>All 3 have detailed and up to date setup and usage instructions.</p>
]]></content>
  </entry>
  
</feed>
